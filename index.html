<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Inscripción Escuela FDH</title>
    <style>
        :root { --primary: #2c3e50; --accent: #c0392b; --bg: #f4f7f6; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); padding: 20px; }
        .form-card { background: white; padding: 40px; border-radius: 8px; max-width: 600px; margin: auto; border-top: 10px solid var(--accent); }
        label { display: block; margin: 15px 0 5px; font-weight: bold; }
        input, select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; }
        button { background: var(--accent); color: white; border: none; padding: 15px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="form-card">
        <h2>Ficha de Inscripción</h2>
        <form id="inscripcionFdh">
            <label>Nombre(s) *</label>
            <input type="text" id="nombre" required>

            <label>Taller *</label>
            <select id="taller" required>
                <option value="">Cargando talleres disponibles...</option>
            </select>

            <button type="submit" id="btnEnviar">ENVIAR REGISTRO</button>
        </form>
    </div>

    <script>
        // FUNCIÓN PARA CARGAR TALLERES DINÁMICAMENTE
        async function cargarTalleres() {
            const webhookListar = 'https://hook.us2.make.com/7zxqsk1gjtjjz4qux7rzfq5337y0ab4n'; 
            try {
                const res = await fetch(webhookListar + '?accion=listarTalleres');
                const talleres = await res.json();
                const select = document.getElementById('taller');
                select.innerHTML = '<option value="">Selecciona un taller...</option>';
                
                talleres.forEach(t => {
                    if(t.Estatus === 'ACTIVO') {
                        let opt = document.createElement('option');
                        opt.value = t.ID_Taller; // Guardamos el ID, no el nombre
                        opt.textContent = t.Nombre_Taller;
                        select.appendChild(opt);
                    }
                });
            } catch (e) { console.error("Error al cargar talleres"); }
        }

        window.onload = cargarTalleres;

        document.getElementById('inscripcionFdh').addEventListener('submit', async (e) => {
            e.preventDefault();
            // Lógica de envío igual a la anterior enviando el ID del taller
        });
    </script>
</body>
</html>
